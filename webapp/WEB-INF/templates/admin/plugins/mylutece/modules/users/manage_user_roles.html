<#include "search_user_management_tabs.html" />
<@pageContainer>
    <@pageColumn>
        <@pageHeader title='${mylutece_search_user.givenName} ${mylutece_search_user.lastName}' description='#i18n{module.mylutece.users.manageRoles.pageTitle}'>
            <@inputGroup>
                <@input type='text' name='roleFilter' id='roleFilter' placeHolder='#i18n{module.mylutece.users.manageRoles.filterPlaceholder}' params='autocomplete="off"' size='' />
                <@button type='button' title='#i18n{module.mylutece.users.buttonSearch}' buttonIcon='search' hideTitle=['all'] size='' />
            </@inputGroup>
        </@pageHeader>
        <@messages infos=infos />
        <@mylutecesearchusermanagement tab="mylutecesearchuserrole" />
        <@tform name='assign_user_roles' action='jsp/admin/plugins/mylutece/modules/users/ManageMyLuteceUserRoles.jsp' boxed=true>
            <@input type='hidden' name='id_mylutecesearchuser' value='${id_mylutecesearchuser}' />
            <@formGroup id='roleList'>
                <#list mylutece_role_list as role>
                    <#if role.role != "none">
                        <#if mylutece_search_user_role_list??>
                            <#assign checked=false>
                            <#list mylutece_search_user_role_list as user_role>
                                <#if user_role.role == role.role>
                                    <#assign checked=true>
                                    <#break>
                                </#if>
                            </#list>
                            <@checkBox id='${role.role}' labelKey='${role.role} - ${role.roleDescription}' value='${role.role}' name='role_key' checked=checked labelClass='searchable' params='data-role="${role.role} ${role.roleDescription}"' />
                        </#if>
                    </#if>
                </#list>
            </@formGroup>
            <@formGroup class='mt-3'>
                <@button type='submit' name='action_assignMyLuteceUserRole' buttonIcon='device-floppy' title='#i18n{module.mylutece.users.manageRoles.buttonSave}' color='primary' />
            </@formGroup>
        </@tform>
    </@pageColumn>
</@pageContainer>
<script type="module">
import LuteceSearchList from './themes/shared/modules/luteceSearchList.js';
const searchInput = document.querySelector("#roleFilter");
const searchElementList = document.querySelectorAll("*[data-role]");
new LuteceSearchList(searchInput, searchElementList, {
    searchableChild: [".searchable"]
});
</script>
